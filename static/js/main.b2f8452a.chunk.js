(this["webpackJsonphatimeria-task"]=this["webpackJsonphatimeria-task"]||[]).push([[0],{18:function(e,t,c){},27:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(5),r=c.n(n),a=(c(18),c(3)),i=c(2),l=c(11),o=c(6),u=c(7),d=Object(l.a)(Object(l.a)({},u),{},{total:function(){var e=0;return u.items.forEach((function(t){e+=t.price.current_price})),e+u.shipping}()}),j=Object(o.b)({name:"products",initialState:d,reducers:{updateTotal:function(e){var t=0;e.items.forEach((function(e){t+=e.price.current_price*e.qty})),e.total=t},deleteItem:function(e,t){e.items=e.items.filter((function(e){return e.id!==t.payload}))},updateQty:function(e,t){console.log(t.payload);var c=e.items.findIndex((function(e){return e.id===t.payload.id}));e.items[c].qty=t.payload.currentQty}}}),p=j.actions,m=p.updateTotal,b=p.deleteItem,x=p.updateQty,h=j.reducer,f=c(4),O=c(1),g=function(e){var t=e.item,c=e.currency,n=t.id,r=t.image,l=t.price,o=t.product_name,u=t.product_options,d=t.qty,j=Object(s.useRef)(null),p=Object(i.b)(),m=Object(s.useState)(d),h=Object(f.a)(m,2),g=h[0],v=h[1],N=Object(s.useState)(!1),y=Object(f.a)(N,2),w=y[0],_=y[1],k=Object(s.useState)(!1),F=Object(f.a)(k,2),C=F[0],S=F[1];return Object(s.useEffect)((function(){_(g<=1),S(g>=10),p(x({currentQty:g,id:n}))}),[g,p,n]),Object(O.jsxs)("div",{className:"w-full p-3 space-y-4 relative",children:[Object(O.jsx)(a.b,{className:"h-6 absolute top-3 right-3 cursor-pointer",onClick:function(){p(b(n))}}),Object(O.jsxs)("div",{className:"flex space-x-6",children:[Object(O.jsx)("img",{src:r,alt:"".concat(o),className:"image"}),Object(O.jsxs)("div",{className:"flex-1 flex flex-col",children:[Object(O.jsx)("h4",{className:"text-xl font-light",children:o}),u.map((function(e){return Object(O.jsxs)("p",{className:"text-sm",children:[Object(O.jsxs)("span",{className:"font-bold",children:[e.name,": "]}),Object(O.jsx)("span",{className:"font-light text-violet",children:e.value})]},e.id)}))]})]}),Object(O.jsxs)("div",{className:"flex justify-between",children:[Object(O.jsxs)("div",{className:"flex space-x-2",children:[Object(O.jsx)("span",{className:"font-medium text-md",children:"Qty:"}),Object(O.jsxs)("div",{className:"relative overflow-hidden border rounded",children:[Object(O.jsx)("button",{className:"add-substract-button left-0 \n              ".concat(w?"bg-gray-300":"bg-violet"),disabled:w,onClick:function(){v(g-1)},children:"-"}),Object(O.jsx)("input",{ref:j,type:"number",min:"1",max:"10",onBlur:function(e){Number(e.target.value)>10&&v(10),Number(e.target.value)<1&&v(1)},className:"w-28 text-center focus:outline-none",value:g,onChange:function(e){return v(Number(e.target.value))}}),Object(O.jsx)("button",{className:"add-substract-button right-0\n              ".concat(C?"bg-gray-300":"bg-violet"),disabled:C,onClick:function(){v(g+1)},children:"+"})]})]}),Object(O.jsxs)("div",{className:"space-x-3 text-xl",children:[l.old_price&&Object(O.jsxs)("span",{className:"line-through text-violet-light",children:[c,(parseFloat(l.old_price)*g).toFixed(2)]}),Object(O.jsxs)("span",{children:[c,(parseFloat(l.current_price)*g).toFixed(2)]})]})]})]})},v=c(10),N=c.n(v),y=c(13),w=function(){var e=Object(s.useState)([]),t=Object(f.a)(e,2),c=t[0],n=t[1],r=Object(i.c)((function(e){return e.products})).currency;return Object(s.useEffect)((function(){var e=function(){var e=Object(y.a)(N.a.mark((function e(){var t,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fakestoreapi.com/products?limit=2");case 2:return t=e.sent,c=t.json(),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){console.log(e),n(e)})).catch((function(e){return console.log(e)}))}),[]),Object(O.jsx)(O.Fragment,{children:c.length?Object(O.jsxs)("div",{className:"bg-violet-light p-5",children:[Object(O.jsx)("h2",{className:"text-gray-600 font-medium text-lg mb-3",children:"Recommended Products"}),Object(O.jsx)("div",{className:"flex sm:flex-row sm:space-y-0 sm:space-x-6 flex-col space-y-3",children:c.map((function(e){return Object(O.jsxs)("div",{className:"w-full flex sm:flex-col bg-white p-5 space-x-3",children:[Object(O.jsx)("img",{src:e.image,className:"image  sm:w-full sm:h-auto sm:mb-3 max-h-52",alt:e.title}),Object(O.jsxs)("div",{className:"flex-1",children:[Object(O.jsx)("h3",{children:e.title}),Object(O.jsxs)("div",{className:"flex justify-between mt-3",children:[Object(O.jsxs)("span",{children:[r,parseFloat(e.price).toFixed(2)]}),Object(O.jsx)("button",{className:"bg-violet py-1 px-6 rounded text-white",children:"Add"})]})]})]},e.id)}))})]}):Object(O.jsx)("p",{className:"p-3 text-center",children:"Loading upsells..."})})},_=function(){var e=Object(i.c)((function(e){return e})).products,t=Object(i.b)(),c=Object(s.useRef)(null),n=Object(s.useRef)(null),r=e.total;Object(s.useEffect)((function(){t(m())}),[e,t,r]);var l=function(){c.current.classList.toggle("translate-x-full"),n.current.classList.toggle("translate-x-full")};return Object(O.jsx)("div",{ref:c,className:"min-h-screen absolute top-0 right-0 bg-white w-screen max-w-screen-sm translate transition duration-200 ease-in-out border shadow translate-x-full",children:Object(O.jsxs)("div",{className:"relative h-screen w-full flex flex-col",children:[Object(O.jsx)("div",{ref:n,className:"absolute top-3 -left-12 h-12 w-12 bg-white rounded-l-lg shadow-md grid place-items-center cursor-pointer transition",onClick:l,children:Object(O.jsx)(a.a,{className:"h-6 w-6"})}),Object(O.jsxs)("div",{className:"bg-white sticky top-0 left-0 flex justify-between items-center p-3 border-b shadow-sm z-10",children:[Object(O.jsxs)("h1",{className:"text-2xl",children:["Cart (",e.items.length,")"]}),Object(O.jsx)(a.b,{className:"h-12 cursor-pointer",onClick:l})]}),Object(O.jsxs)("div",{className:"overflow-y-scroll flex-1 flex flex-col divide-y",children:[e.items.map((function(t){return Object(O.jsx)(g,{item:t,currency:e.currency},t.id)})),Object(O.jsx)(w,{})]}),Object(O.jsxs)("div",{className:"sticky bottom-0 border-t p-3 space-y-3",children:[Object(O.jsxs)("div",{className:"text-xl font-light flex justify-between",children:[Object(O.jsx)("span",{children:"Shipping:"}),Object(O.jsxs)("span",{children:[e.currency,parseFloat(e.shipping).toFixed(2)]})]}),Object(O.jsxs)("div",{className:"text-2xl flex justify-between",children:[Object(O.jsx)("span",{children:"Order total:"}),Object(O.jsxs)("span",{children:[e.currency,parseFloat(r).toFixed(2)]})]}),Object(O.jsx)("button",{className:"text-2xl ".concat(0===e.items.length?"bg-gray-400":"bg-violet"," text-white p-3 text-center rounded-md cursor-pointer w-full"),children:"Checkout"})]})]})})};var k=function(){return Object(O.jsxs)("div",{className:"relative min-h-screen bg-violet flex overflow-hidden",children:[Object(O.jsx)("div",{className:"min-w-full"}),Object(O.jsx)(_,{})]})},F=Object(o.a)({reducer:{products:h}});r.a.render(Object(O.jsx)(i.a,{store:F,children:Object(O.jsx)(k,{})}),document.getElementById("root"))},7:function(e){e.exports=JSON.parse('{"currency":"\u20ac","shipping":15,"items":[{"id":"1","product_name":"T-shirt","image":"https://picsum.photos/150/225?random=1","qty":2,"price":{"old_price":99.95,"current_price":59.95},"product_options":[{"id":"size","name":"Size","value":"M"},{"id":"color","name":"Color","value":"Red"},{"id":"pattern","name":"Pattern","value":"Floral"}]},{"id":"2","product_name":"Dress","image":"https://picsum.photos/200/200?random=1","qty":1,"price":{"current_price":80.55},"product_options":[{"id":"size","name":"Size","value":"L"}]},{"id":"3","product_name":"Backpack","image":"https://picsum.photos/250/175?random=1","qty":1,"price":{"old_price":150.95,"current_price":120.5},"product_options":[]},{"id":"4","product_name":"Backpack XL","image":"https://picsum.photos/250/150?random=1","qty":1,"price":{"current_price":160.5},"product_options":[]}]}')}},[[27,1,2]]]);
//# sourceMappingURL=main.b2f8452a.chunk.js.map